import{a as T}from"./chunk-7YGWDAWP.js";import{B as a,Ba as z,C as r,D as f,Da as B,E,Ea as J,F as S,Fa as g,G as h,Ga as K,I as V,J as F,K as I,L as w,M as m,N as y,T as A,U as R,ba as N,fa as D,ia as j,ka as q,la as P,m as C,n as _,na as Q,o as v,p as b,pa as k,qa as H,r as x,v as l,w as d,wa as O,x as L,xa as U,y as M,ya as G,z as u}from"./chunk-BN6DU3SB.js";function Y(n,t){}function Z(n,t){n&1&&(a(0,"div",5),f(1,"app-loading-spinner"),r())}function $(n,t){if(n&1){let p=E();a(0,"form",6,7),S("ngSubmit",function(){v(p);let e=w(1),o=h();return b(o.onSubmit(e))}),a(2,"div",8)(3,"label",9),m(4,"E-mail"),r(),f(5,"input",10),r(),a(6,"div",8)(7,"label",11),m(8,"Password"),r(),f(9,"input",12),r(),a(10,"div")(11,"button",13),m(12),r(),m(13," | "),a(14,"button",14),S("click",function(){v(p);let e=h();return b(e.onSwitchMode())}),m(15),r()()()}if(n&2){let p=w(1),i=h();l(11),u("disabled",!p.valid),l(),y(i.isLoginMode?"Login":"Sign Up!"),l(3),y(i.isLoginMode?"Switch to Sign Up":"Switch to Log in")}}var W=(()=>{let t=class t{constructor(i,e,o){this.authService=i,this.router=e,this.componentFactoryResolver=o,this.isLoading=!1,this.isLoginMode=!0,this.error=null}onSwitchMode(){this.isLoginMode=!this.isLoginMode}onSubmit(i){if(!i.valid)return;let e=i.value.email,o,s=i.value.password;this.isLoading=!0,this.isLoginMode?o=this.authService.login(e,s):o=this.authService.signup(e,s),o.subscribe(c=>{console.log(c),this.isLoading=!1,this.router.navigate(["/recipes"])},c=>{console.log(c),this.error=c,this.showErrorAlert(c),this.isLoading=!1}),i.reset()}onHandleError(){this.error=null}showErrorAlert(i){let e=this.componentFactoryResolver.resolveComponentFactory(B),o=this.alertHost.viewContainerRef;o.clear();let s=o.createComponent(e);s.instance.message=i,this.closeSub=s.instance.close.subscribe(()=>{this.closeSub.unsubscribe(),o.clear()})}ngOnDestroy(){this.closeSub&&this.closeSub.unsubscribe()}};t.\u0275fac=function(e){return new(e||t)(d(T),d(N),d(L))},t.\u0275cmp=C({type:t,selectors:[["app-auth"]],viewQuery:function(e,o){if(e&1&&V(g,5),e&2){let s;F(s=I())&&(o.alertHost=s.first)}},decls:5,vars:2,consts:[[1,"row"],[1,"col-xs-12","col-md-6","md-offset-3"],["appPlaceholder",""],["style","text-align: center;",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[2,"text-align","center"],[3,"ngSubmit"],["authF","ngForm"],[1,"form-group"],["for","email"],["type","email","id","email","ngModel","","name","email","required","","email","",1,"form-control"],["for","password"],["type","password","id","password","ngModel","","name","password","required","","minlength","6",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"div",1),M(2,Y,0,0,"ng-template",2)(3,Z,2,0,"div",3)(4,$,16,3,"form",4),r()()),e&2&&(l(3),u("ngIf",o.isLoading),l(),u("ngIf",!o.isLoading))},dependencies:[A,H,j,q,P,O,G,U,k,Q,J,g],encapsulation:2});let n=t;return n})();var fe=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_({type:t}),t.\u0275inj=x({imports:[R,z,D.forChild([{path:"",component:W}]),K]});let n=t;return n})();export{fe as a};
